conversational_layer:
  phase: 27
  authority: "none"
  policy_enforcement_boundary: "governed_interpreter"
  notes:
    - "The conversational layer classifies chat vs escalation only."
    - "No execution authority is granted at this layer."
    - "All allow/deny/risk/approval policy remains enforced only by the governed interpreter."

rules:
  "CHAT::chat.recommend_drink":
    allowed: true
    risk_level: low
    requires_approval: false
    reason: "Read-only conversational request is allowed."

  "CHAT::chat.identity_location_question":
    allowed: true
    risk_level: low
    requires_approval: false
    reason: "Identity/context question is allowed in read-only mode."

  "CHAT::chat.general":
    allowed: true
    risk_level: low
    requires_approval: false
    reason: "General conversational request is allowed."

  "HELP::*":
    allowed: true
    risk_level: low
    requires_approval: false
    reason: "Guidance/help requests are allowed."

  "CONTENT_GENERATION::content_generation.draft":
    allowed: true
    risk_level: low
    requires_approval: false
    reason: "Content generation is review-only output with no execution side effects."

  "CLARIFY::*":
    allowed: true
    risk_level: low
    requires_approval: false
    reason: "Clarification requests are allowed."

  "PLAN::plan.create_empty_file":
    allowed: true
    risk_level: medium
    requires_approval: true
    reason: "Local write-like planning request requires approval."

  "PLAN::plan.user_action_request":
    allowed: true
    risk_level: medium
    requires_approval: true
    reason: "Action-like planning request requires approval."

  "PLAN::persist_note":
    allowed: true
    risk_level: medium
    requires_approval: true
    reason: "Composite persist_note routes to governed write_file and requires approval."

  "PLAN::revise_content":
    allowed: true
    risk_level: low
    requires_approval: false
    reason: "Revision generation is side-effect free until optional write-back."

  "PLAN::transform_content":
    allowed: true
    risk_level: low
    requires_approval: false
    reason: "Transformation generation is side-effect free until optional write-back."

  "PLAN::refactor_file":
    allowed: true
    risk_level: medium
    requires_approval: true
    reason: "Refactor-file prepares write-back content and requires explicit approval before execution."

  "PLAN::create_project":
    allowed: true
    risk_level: low
    requires_approval: false
    reason: "Project creation updates session-scoped project context without filesystem side effects."

  "PLAN::update_project":
    allowed: true
    risk_level: medium
    requires_approval: true
    reason: "Project update may compose governed filesystem writes and requires approval."

  "PLAN::list_project_artifacts":
    allowed: true
    risk_level: low
    requires_approval: false
    reason: "Project artifact listing is read-only introspection."

  "PLAN::delete_project":
    allowed: true
    risk_level: high
    requires_approval: true
    reason: "Project deletion is metadata-destructive and requires explicit approval."

  "PLAN::open_project_artifact":
    allowed: true
    risk_level: low
    requires_approval: false
    reason: "Opening a project artifact is read-only."

  "PLAN::project_wide_refactor":
    allowed: true
    risk_level: medium
    requires_approval: true
    reason: "Project-wide refactor composes governed multi-file writes with approval."

  "PLAN::project_documentation_generate":
    allowed: true
    risk_level: low
    requires_approval: false
    reason: "Project documentation generation is review-only output."

  "PLAN::define_project_goal":
    allowed: true
    risk_level: low
    requires_approval: false
    reason: "Project goal definition is advisory metadata with no side effects."

  "PLAN::list_project_goals":
    allowed: true
    risk_level: low
    requires_approval: false
    reason: "Project goal listing is read-only."

  "PLAN::describe_project_goal":
    allowed: true
    risk_level: low
    requires_approval: false
    reason: "Project goal description is read-only."

  "PLAN::list_project_tasks":
    allowed: true
    risk_level: low
    requires_approval: false
    reason: "Project task listing is advisory and read-only."

  "PLAN::task_status":
    allowed: true
    risk_level: low
    requires_approval: false
    reason: "Task status lookup is read-only."

  "PLAN::propose_next_tasks":
    allowed: true
    risk_level: low
    requires_approval: false
    reason: "Task proposals are advisory-only and do not execute."

  "PLAN::complete_task":
    allowed: true
    risk_level: medium
    requires_approval: false
    reason: "Task completion is advisory by default; explicit approval is required when side effects are expected."

  "PLAN::define_milestone":
    allowed: true
    risk_level: low
    requires_approval: false
    reason: "Milestone definition is metadata-only and advisory."

  "PLAN::list_milestones":
    allowed: true
    risk_level: low
    requires_approval: false
    reason: "Milestone listing is read-only."

  "PLAN::describe_milestone":
    allowed: true
    risk_level: low
    requires_approval: false
    reason: "Milestone description is read-only."

  "PLAN::achieve_milestone":
    allowed: true
    risk_level: low
    requires_approval: false
    reason: "Milestone achievement is metadata-only after deterministic compliance checks."

  "PLAN::project_completion_status":
    allowed: true
    risk_level: low
    requires_approval: false
    reason: "Project completion checks are advisory and side-effect free."

  "PLAN::finalize_project":
    allowed: true
    risk_level: high
    requires_approval: true
    reason: "Project finalization changes project mutability and requires explicit approval."

  "PLAN::archive_project":
    allowed: true
    risk_level: high
    requires_approval: true
    reason: "Project archival relocates artifacts and requires explicit approval."

  "PLAN::delegate_to_agent":
    allowed: true
    risk_level: medium
    requires_approval: true
    reason: "Delegation orchestration requires explicit approval and must remain governed."

  "PLAN::list_delegation_capabilities":
    allowed: true
    risk_level: low
    requires_approval: false
    reason: "Delegation capability listing is read-only introspection."

  "PLAN::describe_delegation_result":
    allowed: true
    risk_level: low
    requires_approval: false
    reason: "Delegation result description is read-only."

  "PLAN::define_workflow":
    allowed: true
    risk_level: low
    requires_approval: false
    reason: "Workflow definition is metadata-only and does not execute steps."

  "PLAN::list_workflows":
    allowed: true
    risk_level: low
    requires_approval: false
    reason: "Workflow listing is read-only introspection."

  "PLAN::describe_workflow":
    allowed: true
    risk_level: low
    requires_approval: false
    reason: "Workflow description is read-only."

  "PLAN::preview_workflow":
    allowed: true
    risk_level: low
    requires_approval: false
    reason: "Workflow preview is dry-run only and does not execute."

  "PLAN::run_workflow":
    allowed: true
    risk_level: medium
    requires_approval: true
    reason: "Workflow execution requires explicit approval before starting."

  "PLAN::workflow_status":
    allowed: true
    risk_level: low
    requires_approval: false
    reason: "Workflow status checks are read-only."

  "PLAN::workflow_cancel":
    allowed: true
    risk_level: medium
    requires_approval: true
    reason: "Workflow cancellation requires explicit approval."

  "PLAN::create_file":
    allowed: true
    risk_level: medium
    requires_approval: true
    reason: "Filesystem create_file writes local state and requires approval."

  "PLAN::write_file":
    allowed: true
    risk_level: medium
    requires_approval: true
    reason: "Filesystem write_file modifies local state and requires approval."

  "PLAN::append_file":
    allowed: true
    risk_level: medium
    requires_approval: true
    reason: "Filesystem append_file modifies local state and requires approval."

  "PLAN::read_file":
    allowed: true
    risk_level: low
    requires_approval: false
    reason: "Filesystem read_file is read-only and may execute without approval."

  "PLAN::delete_file":
    allowed: true
    risk_level: high
    requires_approval: true
    reason: "Filesystem delete_file is destructive and requires approval."
